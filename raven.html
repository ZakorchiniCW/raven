<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio de Matriz Lógica - Original SVG</title>
    <style>
        :root {
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --success: #27ae60;
            --error: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: var(--primary-color);
        }

        .container {
            max-width: 800px;
            width: 100%;
            text-align: center;
        }

        .matrix-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            background: #ccc;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .cell {
            background: white;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            border: 2px solid transparent;
        }

        .cell.empty {
            background: #ecf0f1;
            border: 2px dashed #bdc3c7;
            font-size: 2rem;
            font-weight: bold;
            color: #95a5a6;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .option {
            background: white;
            aspect-ratio: 1 / 1;
            cursor: pointer;
            border-radius: 8px;
            border: 3px solid #ddd;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option:hover {
            border-color: var(--accent-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .option.selected-correct { border-color: var(--success); background: #e8f8f0; }
        .option.selected-wrong { border-color: var(--error); background: #fdf2f2; }

        svg { width: 80%; height: 80%; }
        
        .feedback {
            margin-top: 20px;
            font-weight: bold;
            height: 24px;
        }

        h1 { margin-bottom: 10px; }
        p { color: #7f8c8d; margin-bottom: 25px; }
    </style>
</head>
<body>

<div class="container">
    <h1>Teste de Raciocínio Matricial</h1>
    <p>Analise a lógica visual das linhas e colunas e escolha a peça que completa a matriz.</p>

    <div class="matrix-grid" id="matrix">
        <!-- Preenchido via JS -->
    </div>

    <div class="options-grid" id="options">
        <!-- Preenchido via JS -->
    </div>

    <div id="feedback" class="feedback"></div>
</div>

<script>
    /**
     * Módulo de Desenho SVG
     * Responsável por gerar os componentes visuais de forma dinâmica
     */
    const SVGFactory = {
        createWrapper(content) {
            return `<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">${content}</svg>`;
        },

        // Primitivas de desenho
        shapes: {
            lineH: '<line x1="20" y1="50" x2="80" y2="50" stroke="black" stroke-width="4" />',
            lineV: '<line x1="50" y1="20" x2="50" y2="80" stroke="black" stroke-width="4" />',
            circleS: '<circle cx="50" cy="50" r="15" fill="none" stroke="black" stroke-width="3" />',
            circleM: '<circle cx="50" cy="50" r="30" fill="none" stroke="black" stroke-width="3" />',
            triBase: '<path d="M50 20 L80 80 L20 80 Z" fill="none" stroke="black" stroke-width="3" />',
            triLine: '<line x1="50" y1="20" x2="50" y2="80" stroke="black" stroke-width="2" />',
            square: '<rect x="25" y="25" width="50" height="50" fill="none" stroke="black" stroke-width="3" />'
        }
    };

    // Definição das células (8 reais + 1 vazia)
    // Cada item é um array de chaves do SVGFactory.shapes
    const matrixSchema = [
        ['lineH'],           ['lineV'],           ['lineH', 'lineV'], // Linha 1: Soma de linhas
        ['circleS'],         ['circleM'],         ['circleS', 'circleM'], // Linha 2: Soma de círculos
        ['triBase'],         ['triLine'],         null // Linha 3: O alvo (triBase + triLine)
    ];

    // Opções de resposta (A resposta correta é a index 0, mas será embaralhada)
    const optionsSchema = [
        { id: 'correct', shapes: ['triBase', 'triLine'] }, // Correta
        { id: 'w1', shapes: ['triBase', 'square'] },
        { id: 'w2', shapes: ['circleM', 'lineH'] },
        { id: 'w3', shapes: ['triBase'] },
        { id: 'w4', shapes: ['square', 'lineV'] },
        { id: 'w5', shapes: ['circleS', 'triLine'] }
    ];

    function renderMatrix() {
        const matrixContainer = document.getElementById('matrix');
        matrixSchema.forEach((cellShapes, index) => {
            const cellDiv = document.createElement('div');
            cellDiv.className = 'cell';
            
            if (cellShapes === null) {
                cellDiv.classList.add('empty');
                cellDiv.innerText = '?';
            } else {
                const content = cellShapes.map(s => SVGFactory.shapes[s]).join('');
                cellDiv.innerHTML = SVGFactory.createWrapper(content);
            }
            matrixContainer.appendChild(cellDiv);
        });
    }

    function renderOptions() {
        const optionsContainer = document.getElementById('options');
        const feedback = document.getElementById('feedback');
        
        // Clonar e embaralhar opções
        const shuffled = [...optionsSchema].sort(() => Math.random() - 0.5);

        shuffled.forEach(opt => {
            const optDiv = document.createElement('div');
            optDiv.className = 'option';
            const content = opt.shapes.map(s => SVGFactory.shapes[s]).join('');
            optDiv.innerHTML = SVGFactory.createWrapper(content);

            optDiv.onclick = () => {
                // Resetar estilos
                document.querySelectorAll('.option').forEach(el => {
                    el.classList.remove('selected-correct', 'selected-wrong');
                });

                if (opt.id === 'correct') {
                    optDiv.classList.add('selected-correct');
                    feedback.innerText = "Correto! Você identificou a lógica de sobreposição.";
                    feedback.style.color = "var(--success)";
                } else {
                    optDiv.classList.add('selected-wrong');
                    feedback.innerText = "Incorreto. Tente observar como as duas primeiras colunas se somam.";
                    feedback.style.color = "var(--error)";
                }
            };

            optionsContainer.appendChild(optDiv);
        });
    }

    // Inicialização
    window.onload = () => {
        renderMatrix();
        renderOptions();
    };
</script>

</body>
</html>
